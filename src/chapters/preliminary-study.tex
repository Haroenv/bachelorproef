% !TEX root = ../main.tex

\section{Preliminary study} % (fold)
\subsection{Yarn} % (fold)
\label{sub:yarn}

Before jumping into making a new library or improving an existing one, one should use it sufficiently. For that purpose my first task at Algolia was to use react-instantsearch in a (complex) production application, the website of yarn\cite{yarn-site}.

Before I joined, the team worked on integrating Algolia search into the website\cite{yarn-pr-add-algolia}. Since the very beginning of 2017 you are able to look up packages at a very impressive speed at yarnpkg.com/search. I already had some\footnote{\href{https://github.com/yarnpkg/website/pulls/208}{yarnpkg/website\#208}, \href{https://github.com/yarnpkg/website/pulls/210}{yarnpkg/website\#210}, \href{https://github.com/yarnpkg/website/pulls211}{yarnpkg/website\#211} and \href{https://github.com/yarnpkg/website/pulls/335}{yarnpkg/website\#335}} experience with the codebase making small fixes when I saw them earlier, so improving that experience was a project I really loved finding out about.

In the week before I arrived in Paris, some of the team members (Sylvain Utard, Kevin Granger and Vincent Voyer) went to the Facebook -- Facebook has the main contributors to the Yarn project -- offices in London to explore the possibilities of making a detail page for the search, and integrating it even more into the website.

% subsection yarn (end)
\subsection{What is even wrong with the Helper} % (fold)
\label{sub:what_is_even_wrong_with_the_helper}

There have been several phases in the life of Algolia regarding building user interfaces on the web. In short, first there was the REST API. Then tutorials were written on how to use Algolia to build user interfaces using jQuery, moment.js etc. After that the algoliasearch-helper\cite{algolia-helper-github} was written to avoid boilerplate. And most recently instantsearch.js\cite{instantsearch-js} and react-instantsearch\cite{react-instantsearch} were launched.

\subsubsection{Algolia JS client} % (fold)
\label{ssub:algolia_js_client}

When Algolia pivoted\cite{algolia-blog-saas} in 2013 to a SaaS product, it had support\cite{algolia-blog-lauch} for six languages out of the box. JavaScript has always been important because of the focus on speed that Algolia has.

There are two options when you want to search. The first is to send a request from the frontend to Algolia, where you get a JSON response back, which you can then use to render results. The other is sending that same request on your own backend, and constructing the results there, to send them back to the user who requested a search.

We prefer our clients to construct the results on the frontend, mostly because it's faster for everyone. Algolia has infrastructure\cite{algolia-infra} all around the world, and thus having an extra roundtrip to wherever the backend of a client is, can take hundreds of milliseconds more. Since search seems slow as soon as the timeout takes more than 50ms, we want to avoid all timeouts.

% subsubsection algolia_js_client (end)

\subsubsection{Algolia JS Helper} % (fold)
\label{ssub:algolia_js_helper}

% subsubsection algolia_js_helper (end)

\subsubsection{instantsearch.js} % (fold)
\label{ssub:instantsearch_js}

% subsubsection instantsearch_js (end)

\subsubsection{React-instantearch} % (fold)
\label{ssub:react_instantearch}

% subsubsection react_instantearch (end)

\subsubsection{The future} % (fold)
\label{ssub:the_future}

% subsubsection the_future (end)

% subsection what_is_even_wrong_with_the_helper (end)
